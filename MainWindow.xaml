<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf" x:Class="SWAT__Toolbox.MainWindow"
        mc:Ignorable="d"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        Background="{DynamicResource MaterialDesignPaper}"
        FontFamily="{DynamicResource MaterialDesignFont}"
        Title="SWAT+ Toolbox" Height="700" Width="1100" MinHeight="700" MinWidth="950" Icon="swat_plus_toolbox.png" WindowStartupLocation="CenterScreen" WindowStyle="None">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="130"/>
            <RowDefinition/>
            <RowDefinition Height="5"/>
        </Grid.RowDefinitions>

        <materialDesign:ColorZone Grid.Row="0" Mode="PrimaryLight" VerticalAlignment="Stretch" 
                                  HorizontalAlignment="Stretch" VerticalContentAlignment="Stretch" Background="#FF06467A"/>

        <TextBlock FontSize="16" Height="20" HorizontalAlignment="Left"  VerticalAlignment="Top" Margin="12, 12, 0, 0" Foreground="White">
            SWAT+ Toolbox
        </TextBlock>

        <StackPanel Grid.Row="0" Orientation="Horizontal" VerticalAlignment="Top" HorizontalAlignment="Right" WindowChrome.IsHitTestVisibleInChrome="True" Height="32" Width="138">
            <Button Width = "46" Style="{StaticResource MaterialDesignFlatButton}" Foreground="{DynamicResource MaterialDesignPaper}" ToolTip="Minimise" Click="WindowMinimise" Cursor="Arrow">
                <materialDesign:PackIcon Kind="WindowMinimize" />
            </Button>
            <Button Width = "46" Style="{StaticResource MaterialDesignFlatButton}" Foreground="{DynamicResource MaterialDesignPaper}" ToolTip="Maxmise" Click="RestoreMaximise" Cursor="Arrow">
                <materialDesign:PackIcon Kind="WindowMaximize" />
            </Button>
            <Button Width = "46" Style="{StaticResource MaterialDesignFlatButton}" Foreground="{DynamicResource MaterialDesignPaper}" x:Name="ui_close_button" ToolTip="Close" Click="CloseWindow" Cursor="Arrow" Background="#00000000">
                <materialDesign:PackIcon Kind="WindowClose" />
            </Button>
        </StackPanel>

        <StackPanel Grid.Row="0" Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,86,0,0" Width="1095" >
            <RadioButton Style="{StaticResource MaterialDesignTabRadioButton}" Margin="4" IsChecked="True" Click="navigate_homepage" Cursor="Hand">
                <TextBlock Style="{StaticResource MaterialDesignSubtitle1TextBlock}" Foreground="{DynamicResource MaterialDesignPaper}"><Run Text="Home"/></TextBlock>
            </RadioButton>
            <RadioButton Style="{StaticResource MaterialDesignTabRadioButton}" Margin="4" IsChecked="False" Click="navigate_runmodel" Cursor="Hand">
                <TextBlock Style="{StaticResource MaterialDesignSubtitle1TextBlock}" Foreground="{DynamicResource MaterialDesignPaper}"><Run Text="Run Model"/></TextBlock>
            </RadioButton>
            <RadioButton Style="{StaticResource MaterialDesignTabRadioButton}" Margin="4" IsChecked="False" Click="navigate_parameters" Cursor="Hand">
                <TextBlock Style="{StaticResource MaterialDesignSubtitle1TextBlock}" Foreground="{DynamicResource MaterialDesignPaper}"><Run Text="Parameters"/></TextBlock>
            </RadioButton>
            <RadioButton Style="{StaticResource MaterialDesignTabRadioButton}" Margin="4" IsChecked="False" Click="navigate_observations" Cursor="Hand">
                <TextBlock Style="{StaticResource MaterialDesignSubtitle1TextBlock}" Foreground="{DynamicResource MaterialDesignPaper}"><Run Text="Observations"/></TextBlock>
            </RadioButton>
            <RadioButton Style="{StaticResource MaterialDesignTabRadioButton}" Margin="4" IsChecked="False" Click="navigate_sensitivity" Cursor="Hand">
                <TextBlock Style="{StaticResource MaterialDesignSubtitle1TextBlock}" Foreground="{DynamicResource MaterialDesignPaper}" Cursor="Hand"><Run Text="Sensitivity Analysis"/></TextBlock>
            </RadioButton>
            <RadioButton Style="{StaticResource MaterialDesignTabRadioButton}" Margin="4" IsChecked="False" Click="navigate_calibration" Cursor="Hand">
                <TextBlock Style="{StaticResource MaterialDesignSubtitle1TextBlock}" Foreground="{DynamicResource MaterialDesignPaper}"><Run Text="Calibration"/></TextBlock>
            </RadioButton>
            <RadioButton Style="{StaticResource MaterialDesignTabRadioButton}" Margin="4" IsChecked="False" Click="navigate_model_check" Cursor="Hand">
                <TextBlock Style="{StaticResource MaterialDesignSubtitle1TextBlock}" Foreground="{DynamicResource MaterialDesignPaper}"><Run Text="Model Check"/></TextBlock>
            </RadioButton>
        </StackPanel>

        <materialDesign:Transitioner Grid.Row="1" SelectedIndex="0" AutoApplyTransitionOrigins="True">
            <Grid Margin="0,0,0,10">

                <TabControl  x:Name="pages" TabStripPlacement="Bottom" Margin="0,0,0,-46">
                    <TabItem Header="Home">
                        <Grid Background="{DynamicResource MaterialDesignPaper}" Margin="0,0,0,24">

                            <Grid.RowDefinitions>
                                <RowDefinition Height="140*"/>
                                <RowDefinition Height="119*"/>
                                <RowDefinition Height="145*"/>
                            </Grid.RowDefinitions>

                            <Grid HorizontalAlignment="Center">
                                <StackPanel Orientation="Horizontal">
                                    <Image HorizontalAlignment="Center" VerticalAlignment="Top" Grid.Row="0" Margin="0,82,10,0" Grid.RowSpan="2" Width="90" Height="90" Source="swat_plus_toolbox.png"/>
                                    <TextBlock TextAlignment="Center" Grid.Row="0" Style="{StaticResource MaterialDesignHeadline2TextBlock}"
                                           HorizontalAlignment="Center" VerticalAlignment="Top" Height="69" Margin="0,87,0,0">
                                        <Hyperlink IsEnabled="False"><Run Text="SWAT+ Toolbox"/></Hyperlink>
                                    </TextBlock>
                                </StackPanel>
                            </Grid>

                            <Grid Grid.Row="1">
                                <StackPanel Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Center">

                                    <materialDesign:DialogHost HorizontalAlignment="Center" VerticalAlignment="Center">
                                        <materialDesign:DialogHost.DialogContent>
                                            <StackPanel Width="500">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="30"/>
                                                    </Grid.ColumnDefinitions>

                                                    <TextBlock Grid.Column="0"  Margin="16"><Run Text="Create a SWAT+ Toolbox Project."/></TextBlock>

                                                    <Button Margin="0, -10, 5, 0" Width="22" Height="22" Grid.Column="1" Style="{StaticResource MaterialDesignIconButton}" 
                                                            Command="materialDesign:DialogHost.CloseDialogCommand"
                                                            ToolTip="Cancel">
                                                        <materialDesign:PackIcon Kind="WindowClose" />
                                                    </Button>

                                                </Grid>

                                                <StackPanel Orientation="Vertical" HorizontalAlignment="Stretch">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="Auto" />
                                                        </Grid.RowDefinitions>

                                                        <Grid Height="200" Grid.Row="0"  Margin="16, 0, 16, 16">
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="32"/>
                                                                <ColumnDefinition Width="*"/>
                                                                <ColumnDefinition Width="32"/>
                                                            </Grid.ColumnDefinitions>
                                                            <Grid.RowDefinitions>
                                                                <RowDefinition Height="*"/>
                                                                <RowDefinition Height="*"/>
                                                            </Grid.RowDefinitions>

                                                            <materialDesign:PackIcon VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" Kind="FolderOpen" Width="28" Height="28"/>
                                                            <TextBox TextAlignment="Left" x:Name="ui_home_new_project_txtinout_path" VerticalAlignment="Center" Grid.Row="0" Grid.Column="1" Margin="8 0 8 0" HorizontalAlignment="Stretch" materialDesign:HintAssist.Hint="Set TxtInOut Directory" IsEnabled="False" />

                                                            <Button VerticalAlignment="Center" Width="32" Height="32" Grid.Row="0" Grid.Column="2" Style="{StaticResource MaterialDesignIconButton}" ToolTip="Browse for TxtInOut Directory" Background="{DynamicResource MaterialDesignTextFieldBoxBackground}">
                                                                <materialDesign:PackIcon Kind="Plus" />
                                                            </Button>


                                                            <materialDesign:PackIcon VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" Kind="File" Width="28" Height="28"/>
                                                            <TextBox TextAlignment="Left" x:Name="ui_home_new_project_file_path" VerticalAlignment="Center" Grid.Row="1" Grid.Column="1" Margin="8 0 8 0" HorizontalAlignment="Stretch" materialDesign:HintAssist.Hint="Set Project Save Location" IsEnabled="False" />

                                                            <Button VerticalAlignment="Center" Width="32" Height="32" Grid.Row="1" Grid.Column="2" Style="{StaticResource MaterialDesignIconButton}" ToolTip="Browse for Project Save Location" Background="{DynamicResource MaterialDesignTextFieldBoxBackground}" Click="home_set_project">
                                                                <materialDesign:PackIcon Kind="Plus"/>
                                                            </Button>
                                                        </Grid>

                                                        <materialDesign:ColorZone Mode="PrimaryMid" Grid.Row="1" Effect="{DynamicResource MaterialDesignShadowDepth5}" Background="#FF06467A">
                                                            <TextBlock Margin="16"><Run Text="New Project"/></TextBlock>
                                                        </materialDesign:ColorZone>
                                                        <Button x:Name="ui_home_new_project_save" Background="#FF2962FF" BorderThickness="0" Style="{StaticResource MaterialDesignFloatingActionMiniAccentButton}" ToolTip="Save SWAT+ Toolbox Project" Command="{x:Static materialDesign:DialogHost.CloseDialogCommand}" VerticalAlignment="Bottom" HorizontalAlignment="Right" Grid.Row="0" Margin="0 0 28 -20" BorderBrush="#00000000">
                                                            <materialDesign:PackIcon Kind="ContentSave" Height="22" Width="22" />
                                                        </Button>
                                                    </Grid>

                                                </StackPanel>
                                            </StackPanel>
                                        </materialDesign:DialogHost.DialogContent>
                                        <StackPanel Orientation="Horizontal">
                                            <Button x:Name="ui_home_new_project" Click="home_set_project" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Style="{StaticResource MaterialDesignFlatButton}"   ToolTip="Start a New Project">
                                                <!--Command="{x:Static materialDesign:DialogHost.OpenDialogCommand}"-->
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon Kind="Plus" />
                                                    <TextBlock Text="New Project" />
                                                </StackPanel>
                                            </Button>

                                            <Button x:Name="ui_home_open_project" Foreground="{DynamicResource MaterialDesignTextAreaBorder}" Style="{StaticResource MaterialDesignFlatButton}" ToolTip="Open an Existing Project" Click="home_open_project">
                                                <StackPanel Orientation="Horizontal">
                                                    <materialDesign:PackIcon Kind="ChevronRight" />
                                                    <TextBlock><Run Text="Open Project"/></TextBlock>
                                                </StackPanel>
                                            </Button>
                                        </StackPanel>
                                    </materialDesign:DialogHost>


                                </StackPanel>

                            </Grid>

                            <Grid Grid.Row="2">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <DataGrid Grid.Column="1" x:Name="ui_home_recent_listdatagrid" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                      Margin="0,0,0,0" CanUserAddRows="False"  AutoGenerateColumns="False">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn IsReadOnly="True" Header="Project Name" Binding="{Binding Key}" Width="Auto" />
                                        <DataGridTextColumn IsReadOnly="True" Header="TxtInOut Directory" Binding="{Binding Value}" Width="*"/>
                                        <DataGridTextColumn IsReadOnly="True" Header="x" Binding="{Binding minimum}" Width="30"/>
                                    </DataGrid.Columns>
                                </DataGrid>
                            </Grid>
                            


                        </Grid>
                    </TabItem>


                    <!--page 2-->
                    <TabItem Header="Run Model" Height="22" VerticalAlignment="Top">
                        <Grid x:Name="ui_run_model_grid" Background="{DynamicResource MaterialDesignPaper}" Margin="0, 10, 0, 0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="3*"/>
                                <RowDefinition Height="17*"/>
                                <RowDefinition Height="8*"/>
                            </Grid.RowDefinitions>

                            <Grid VerticalAlignment="Center" Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>
                                <StackPanel Grid.Row="0" Grid.Column="0" Orientation="Vertical" Margin="20, 0, 0, 0" Width="240" HorizontalAlignment="Right">

                                    <TextBlock HorizontalAlignment="Right"><Run Text="Simulation Period"/></TextBlock>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0, 5, 0, 0">
                                        <DatePicker x:Name="ui_run_model_start_date" Margin="0, 0, 0, 0" HorizontalAlignment="Right" Width="110" materialDesign:HintAssist.Hint="Start Date"
                                                    Style="{StaticResource MaterialDesignFloatingHintDatePicker}" CalendarClosed="update_project_start_date" LostFocus="update_project_start_date"/>
                                        <DatePicker x:Name="ui_run_model_end_date" Margin="20, 0, 0, 0" HorizontalAlignment="Right" Width="110" materialDesign:HintAssist.Hint="End Date"
                                                    Style="{StaticResource MaterialDesignFloatingHintDatePicker}" CalendarClosed="update_project_end_date" LostFocus="update_project_end_date"/>
                                    </StackPanel>

                                    <TextBlock HorizontalAlignment="Right" Height="10" Padding="0, 0, 0, 0"/>

                                    <TextBox x:Name="ui_run_model_warmup_period" HorizontalAlignment="Right" Width="110" materialDesign:HintAssist.Hint="Warm-Up Period"
                                         Style="{StaticResource MaterialDesignFloatingHintTextBox}" VerticalAlignment="Center"
                                         materialDesign:TextFieldAssist.SuffixText=" Years" TextAlignment="Right" LostFocus="update_project_warmup" Text="2"/>

                                    <StackPanel Orientation="Vertical" >

                                        <ComboBox x:Name="ui_run_model_routing_method" Style="{StaticResource MaterialDesignFloatingHintComboBox}" materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                              materialDesign:HintAssist.Hint="Routing Method" HorizontalAlignment="Stretch" Margin="0, 30, 0, 0" MinWidth="110" DropDownClosed="update_run_options">
                                            <ComboBoxItem>
                                                Variable Storage
                                            </ComboBoxItem>
                                            <ComboBoxItem IsSelected="True">
                                                Muskingum
                                            </ComboBoxItem>
                                        </ComboBox>

                                        <ComboBox x:Name="ui_run_model_pet_method" Style="{StaticResource MaterialDesignFloatingHintComboBox}" materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                              materialDesign:HintAssist.Hint="PET Method" HorizontalAlignment="Stretch" Margin="0, 5, 0, 0" MinWidth="110" DropDownClosed="update_run_options">
                                            <ComboBoxItem>
                                                Priestly and Taylor
                                            </ComboBoxItem>
                                            <ComboBoxItem IsSelected="True">
                                                Penman-Monteith
                                            </ComboBoxItem>
                                            <ComboBoxItem>
                                                Hargreaves
                                            </ComboBoxItem>
                                            <ComboBoxItem>
                                                Read PET From File
                                            </ComboBoxItem>
                                        </ComboBox>
                                    </StackPanel>

                                    <TextBlock HorizontalAlignment="Right" Margin="0,40,0,7"><Run Text="Print CSV Output"/></TextBlock>

                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,0" HorizontalAlignment="Right">
                                        <TextBlock><Run Text="No"/></TextBlock>
                                        <ToggleButton Checked="update_print_settings" Unchecked="update_print_settings" IsChecked="{Binding print_csv, Mode=TwoWay}" x:Name="ui_run_model_print_csv" Style="{StaticResource MaterialDesignSwitchToggleButton}" Margin="10,0,10,0"
                                                  ToolTip="Switch for printing CSV output" />
                                        <!--Unchecked="update_project_print_csv" Checked="update_project_print_csv"-->
                                        <TextBlock Margin="0,0,0,0"><Run Text="Yes"/></TextBlock>
                                    </StackPanel>


                                </StackPanel>

                                <ScrollViewer Grid.Row="0" Grid.Column="1" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                                    <StackPanel   Orientation="Vertical" Margin="20, 0, 0, 0" HorizontalAlignment="Left">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Width="120"><Hyperlink IsEnabled="True" materialDesign:HintAssist.Hint="Type of Object to be printed" materialDesign:HintAssist.HintOpacity=".26" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Print Object"/></Hyperlink></TextBlock>
                                            <TextBlock  Width="110" TextAlignment="Right"><Hyperlink IsEnabled="True" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Daily"/></Hyperlink></TextBlock>
                                            <TextBlock Width="83" TextAlignment="Right"><Hyperlink IsEnabled="True" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Monthly"/></Hyperlink></TextBlock>
                                            <TextBlock Width="83" TextAlignment="Right"><Hyperlink IsEnabled="True" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Yearly"/></Hyperlink></TextBlock>
                                            <TextBlock Width="83" TextAlignment="Right"><Hyperlink IsEnabled="True" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Average"/></Hyperlink></TextBlock>
                                        </StackPanel>




                                        <StackPanel>
                                            <Expander
                                        HorizontalAlignment="Stretch"
                                        Header="Model Components"
                                        materialDesign:ExpanderAssist.DownHeaderPadding="10, 0, 0, 0"
                                        IsExpanded="True">

                                                <StackPanel Orientation="Vertical" TextBlock.Foreground="{DynamicResource MaterialDesignBody}" Margin="24,8,24,16">

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Channel"/></Hyperlink></TextBlock>
                                                        <CheckBox x:Name="ui_run_model_print_channel_day"   IsChecked="{Binding daily, Mode=TwoWay}"               Checked="update_print_settings" Unchecked="update_print_settings"   Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" />
                                                        <CheckBox x:Name="ui_run_model_print_channel_month" IsChecked="{Binding monthly, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox x:Name="ui_run_model_print_channel_year"  IsChecked="{Binding yearly, Mode=TwoWay}"              Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox x:Name="ui_run_model_print_channel_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"      Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Reservoir"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_reservoir_day"   IsChecked="{Binding daily, Mode=TwoWay}"               Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_reservoir_month" IsChecked="{Binding monthly, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_reservoir_year"  IsChecked="{Binding yearly, Mode=TwoWay}"              Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_reservoir_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"      Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Aquifer"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_aquifer_day"   IsChecked="{Binding daily, Mode=TwoWay}"              Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_aquifer_month" IsChecked="{Binding monthly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_aquifer_year"  IsChecked="{Binding yearly, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_aquifer_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"     Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                </StackPanel>

                                            </Expander>
                                            <Expander
                                        HorizontalAlignment="Stretch"
                                        Header="Nutrient Balance"
                                        materialDesign:ExpanderAssist.DownHeaderPadding="10, 0, 0, 0">

                                                <StackPanel Orientation="Vertical" TextBlock.Foreground="{DynamicResource MaterialDesignBody}" Margin="24,8,24,16">

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Basin"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_basin_day"   IsChecked="{Binding daily, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_nut_basin_month" IsChecked="{Binding monthly, Mode=TwoWay}"           Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_basin_year"  IsChecked="{Binding yearly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_basin_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"    Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="LSU"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_lsu_day"   IsChecked="{Binding daily, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_nut_lsu_month" IsChecked="{Binding monthly, Mode=TwoWay}"           Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_lsu_year"  IsChecked="{Binding yearly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_lsu_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"    Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="HRU"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_hru_day"   IsChecked="{Binding daily, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_nut_hru_month" IsChecked="{Binding monthly, Mode=TwoWay}"           Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_hru_year"  IsChecked="{Binding yearly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_nut_hru_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"    Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                </StackPanel>

                                            </Expander>
                                            <Expander
                                        HorizontalAlignment="Stretch"
                                        Header="Water Balance"
                                        materialDesign:ExpanderAssist.DownHeaderPadding="10, 0, 0, 0"
                                        IsExpanded="True">


                                                <StackPanel Orientation="Vertical" TextBlock.Foreground="{DynamicResource MaterialDesignBody}" Margin="24,8,24,16">

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Basin"/></Hyperlink></TextBlock>
                                                        <CheckBox   x:Name="ui_run_model_print_wb_basin_day"   IsChecked="{Binding daily, Mode=TwoWay}"              Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox   x:Name="ui_run_model_print_wb_basin_month" IsChecked="{Binding monthly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox   x:Name="ui_run_model_print_wb_basin_year"  IsChecked="{Binding yearly, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox   x:Name="ui_run_model_print_wb_basin_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"     Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="LSU"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_wb_lsu_day"   IsChecked="{Binding daily, Mode=TwoWay}"              Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_wb_lsu_month" IsChecked="{Binding monthly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_wb_lsu_year"  IsChecked="{Binding yearly, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_wb_lsu_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"     Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="HRU"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_wb_hru_day"   IsChecked="{Binding daily, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_wb_hru_month" IsChecked="{Binding monthly, Mode=TwoWay}"           Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_wb_hru_year"  IsChecked="{Binding yearly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_wb_hru_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"    Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                </StackPanel>

                                            </Expander>
                                            <Expander
                                        HorizontalAlignment="Stretch"
                                        Header="Plant"
                                        materialDesign:ExpanderAssist.DownHeaderPadding="10, 0, 0, 0">

                                                <StackPanel Orientation="Vertical" TextBlock.Foreground="{DynamicResource MaterialDesignBody}" Margin="24,8,24,16">

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="Basin"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_basin_day"   IsChecked="{Binding daily, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_plt_basin_month" IsChecked="{Binding monthly, Mode=TwoWay}"          Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_basin_year"  IsChecked="{Binding yearly, Mode=TwoWay}"           Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_basin_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"   Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="LSU"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_lsu_day"   IsChecked="{Binding daily, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_plt_lsu_month" IsChecked="{Binding monthly, Mode=TwoWay}"           Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_lsu_year"  IsChecked="{Binding yearly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_lsu_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"    Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="-10, 10, 0, 0">
                                                        <TextBlock Width="120"><Hyperlink IsEnabled="False" Style="{StaticResource MaterialDesignBody1Hyperlink}"><Run Text="HRU"/></Hyperlink></TextBlock>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_hru_day"   IsChecked="{Binding daily, Mode=TwoWay}"             Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="84, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings" />
                                                        <CheckBox  x:Name="ui_run_model_print_plt_hru_month" IsChecked="{Binding monthly, Mode=TwoWay}"           Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_hru_year"  IsChecked="{Binding yearly, Mode=TwoWay}"            Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                        <CheckBox  x:Name="ui_run_model_print_plt_hru_aa"    IsChecked="{Binding annual_average, Mode=TwoWay}"    Style="{StaticResource MaterialDesignDarkCheckBox}" Content="" Margin="60, 0, 0, 0" Checked="update_print_settings" Unchecked="update_print_settings"/>
                                                    </StackPanel>

                                                </StackPanel>

                                            </Expander>
                                        </StackPanel>













                                    </StackPanel>
                                </ScrollViewer>


                            </Grid>

                            <Grid Grid.Row="2" VerticalAlignment="Top">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="2*"/>
                                </Grid.ColumnDefinitions>

                                <ProgressBar Value="0" x:Name="ui_run_model_annual_progress" Grid.Column="0" HorizontalAlignment="Right" Margin="0,0,0,0" Width="70" Height="70" Style="{StaticResource MaterialDesignCircularProgressBar}"/>

                                <StackPanel x:Name="running_swat_info" Grid.Column="0" Margin="0, 0 , 18, 0" Orientation="Vertical"
                                            HorizontalAlignment="Right" VerticalAlignment="Center">
                                    <TextBlock Text=" " x:Name="ui_run_model_running_year" FontSize="16"  HorizontalAlignment="Center"/>
                                    <TextBlock Text=" " x:Name="ui_run_model_total_years" FontSize="14"  HorizontalAlignment="Center"/>
                                </StackPanel>

                                <Grid Grid.Column="1">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <ProgressBar materialDesign:TransitionAssist.DisableTransitions="True" x:Name="ui_run_model_progress" Value = "0" VerticalAlignment="Bottom" Margin="12,0,0,5" Width="510" HorizontalAlignment="Left" Height="5"  />

                                    <Button Foreground="{DynamicResource MaterialDesignTextAreaBorder}" x:Name="ui_run_model_run_swat_plus"
                                            Grid.Row = "1" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="12,0,0,0"
                                            Style="{StaticResource MaterialDesignFlatButton}" ToolTip="Run SWAT+ with current settings" Click="run_swat_plus_model">
                                        <StackPanel Orientation="Horizontal">
                                            <materialDesign:PackIcon x:Name="ui_run_model_run_icon" Kind="Play" />
                                            <TextBlock  x:Name="ui_run_model_run_swat_button_text" Text=" Run SWAT+"/>
                                        </StackPanel>
                                    </Button>
                                </Grid>
                            </Grid>
                        </Grid>
                    </TabItem>

                    <!--page 3-->

                    <TabItem Header="Parameters" Height="22" VerticalAlignment="Top">
                        <Grid x:Name="ui_parameters_grid" Background="{DynamicResource MaterialDesignPaper}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="100"/>
                                <RowDefinition Height="*"/>
                            </Grid.RowDefinitions>
                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="1">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="46"/>
                                    </Grid.ColumnDefinitions>

                                    <Grid Grid.Column="0">
                                        <StackPanel Orientation="Horizontal">
                                            <ComboBox x:Name="ui_parameter_group" Style="{StaticResource MaterialDesignFloatingHintComboBox}" materialDesign:TextFieldAssist.HasClearButton="False"
                                                      materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                                       materialDesign:HintAssist.Hint="Parameter Group" materialDesign:HintAssist.HintOpacity=".26" MinWidth="180" Margin="0, 0, 0, 0" DropDownClosed="list_available_parameters">
                                                <ComboBoxItem IsSelected="False" Content="All"/>
                                                <ComboBoxItem Content="Hydrologic Response Unit"/>
                                                <ComboBoxItem Content="Aquifer"/>
                                                <ComboBoxItem Content="Routing"/>
                                                <ComboBoxItem Content="HRU LTE"/>
                                                <ComboBoxItem Content="Soil"/>
                                                <ComboBoxItem Content="Reservoir"/>
                                                <ComboBoxItem Content="SWQ"/>
                                            </ComboBox>
                                            <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}"  x:Name="ui_parameter_name"
                                                      materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                                       materialDesign:HintAssist.Hint="Parameter Name" MinWidth="180" materialDesign:HintAssist.HintOpacity=".26" Margin="10, 0, 0, 0"/>

                                            <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}" x:Name="ui_parameter_change_type" Margin="30, 0, 0, 0"
                                                      materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                                       materialDesign:HintAssist.Hint="Change Type" MinWidth="120" materialDesign:HintAssist.HintOpacity=".26" >
                                                <ComboBoxItem Content="Percentage"/>
                                                <ComboBoxItem Content="Relative Value"/>
                                                <ComboBoxItem Content="Replace"/>
                                            </ComboBox>

                                            <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}" 
                                                      materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}" x:Name="ui_parameter_minimum" IsEditable="True"
                                                       materialDesign:HintAssist.Hint="Minimum" MinWidth="100" materialDesign:HintAssist.HintOpacity=".26" Margin="10, 0, 0, 0">
                                                <ComboBoxItem Content="-10"/>
                                                <ComboBoxItem Content="-20"/>
                                                <ComboBoxItem Content="-30"/>
                                            </ComboBox>
                                            <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}" 
                                                      materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}" x:Name="ui_parameter_maximum" IsEditable="True"
                                                       materialDesign:HintAssist.Hint="Maximum" MinWidth="100" materialDesign:HintAssist.HintOpacity=".26" Margin="10, 0, 0, 0">
                                                <ComboBoxItem Content="10"/>
                                                <ComboBoxItem Content="20"/>
                                                <ComboBoxItem Content="30"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </Grid>
                                    <Grid Grid.Column="1" HorizontalAlignment="Right">
                                        <Button Style="{StaticResource MaterialDesignFloatingActionMiniButton}" ToolTip="Add to observations table" Width="35"
                                                Height="35" Margin="10, 0, 0, 0"
                                                HorizontalAlignment ="Right" Click="add_parameter"
                                                >
                                            <materialDesign:PackIcon Kind="Add" />

                                        </Button>
                                    </Grid>
                                </Grid>

                            </Grid>

                            <TabControl BorderThickness="0" TabStripPlacement="Bottom" Grid.Row="1" BorderBrush="SkyBlue" Margin="-8,0,-12,-31">
                                <TabItem Header="TabItem">
                                    <Grid Background="{DynamicResource MaterialDesignPaper}" Margin="0, 0, 0, 0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="10*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <DataGrid Grid.Column="1" x:Name="ui_selected_parameters" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                      Margin="0,0,0,0" CanUserAddRows="False"  AutoGenerateColumns="False">
                                            <DataGrid.Columns>
                                                <DataGridTextColumn IsReadOnly="True" Header="Parameter Group" Binding="{Binding object_type}" Width="2*"/>
                                                <DataGridTextColumn IsReadOnly="True" Header="Parameter Name" Binding="{Binding name}" Width="2*" />
                                                <DataGridTextColumn IsReadOnly="True" Header="Change Type" Binding="{Binding change_type}" Width="2*"/>
                                                <DataGridTextColumn IsReadOnly="True" Header="Minimum" Binding="{Binding minimum}" Width="*"/>
                                                <DataGridTextColumn IsReadOnly="True" Header="Maximum" Binding="{Binding maximum}" Width="*"/>
                                                <DataGridTextColumn IsReadOnly="True" Header="Units" Binding="{Binding units}" Width="*"/>
                                            </DataGrid.Columns>

                                        </DataGrid>
                                    </Grid>
                                </TabItem>
                                <TabItem Header="TabItem" Visibility="Hidden">
                                    <Grid Background="{DynamicResource MaterialDesignPaper}"/>
                                </TabItem>
                            </TabControl>

                        </Grid>
                    </TabItem>

                    <TabItem Header="Observations" Height="24" VerticalAlignment="Top">

                        <Grid x:Name="ui_observations_grid" Background="{DynamicResource MaterialDesignPaper}">

                            <Grid Grid.Column="1" Background="{DynamicResource MaterialDesignPaper}">

                                <Grid Grid.Column="0">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="100"/>
                                        <RowDefinition Height="*"/>
                                    </Grid.RowDefinitions>

                                    <Grid Grid.Row="0" Margin="0, 0, 0, 0">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="10*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid Grid.Column="1">

                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="280"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="300"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Right">
                                                <StackPanel Orientation="Horizontal">
                                                    <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}" materialDesign:TextFieldAssist.HasClearButton="False"
                                                    materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}" HorizontalAlignment="Left"
                                                    materialDesign:HintAssist.Hint="Object Type" Width="175" x:Name="ui_observations_object_type">
                                                        <ComboBoxItem IsSelected="False" Content="Channel"/>
                                                        <ComboBoxItem Content="Landscape Unit"/>
                                                        <ComboBoxItem Content="Hydrologic Response Unit"/>
                                                        <ComboBoxItem Content="All Basin"/>
                                                    </ComboBox>

                                                    <TextBox x:Name="ui_observations_object_number" materialDesign:HintAssist.Hint="Object Number" TextAlignment="Right" Margin="14, 0, 0, 3" Width="90"
                                                        Style="{StaticResource MaterialDesignFloatingHintTextBox}" HorizontalAlignment="Left" VerticalAlignment="Center">

                                                    </TextBox>
                                                </StackPanel>
                                            </StackPanel>

                                            <materialDesign:Chip Opacity="0.7" Grid.Column="1"  IsDeletable="True" ToolTip="Observation File"
                                             DeleteToolTip="Remove Selected File" Margin="10,38,10,30" HorizontalAlignment="Stretch" Click="pick_observation_file" DeleteClick="clear_observation_file">
                                                <StackPanel Orientation="Horizontal" Margin="0, 0, 0, -2">
                                                    <materialDesign:PackIcon Kind="MicrosoftExcel" />
                                                    <TextBlock x:Name="ui_parameters_file_selection_path" Margin="6, 0, 0, 0">Click to select an observation file</TextBlock>
                                                </StackPanel>
                                            </materialDesign:Chip>

                                            <Grid Grid.Column="2">
                                                <StackPanel Orientation="Horizontal">
                                                    <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}" materialDesign:TextFieldAssist.HasClearButton="False"
                                                        materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}" HorizontalAlignment="Stretch"
                                                        materialDesign:HintAssist.Hint="Timestep" Width="80" Margin="10, 0, 0, 0"
                                                          x:Name="ui_observations_timestep">
                                                        <ComboBoxItem IsSelected="False" Content="Daily"/>
                                                        <ComboBoxItem Content="Monthly"/>
                                                        <ComboBoxItem Content="Yearly"/>
                                                    </ComboBox>

                                                    <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}" materialDesign:TextFieldAssist.HasClearButton="False"
                                                        materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}" HorizontalAlignment="Stretch"
                                                        materialDesign:HintAssist.Hint="Observed Variable" Width="155" Margin="10, 0, 0, 0"
                                                          x:Name="ui_observations_observed_variable">
                                                        <ComboBoxItem IsSelected="False" Content="Flow"/>
                                                        <ComboBoxItem Content="ET"/>
                                                        <ComboBoxItem Content="Sediments"/>
                                                        <ComboBoxItem Content="Organic Nitrogen"/>
                                                        <ComboBoxItem Content="Nitrate Nitrogen"/>
                                                        <ComboBoxItem Content="Amonium Nitrogen"/>
                                                        <ComboBoxItem Content="Nitrite Nitrogen"/>
                                                        <!--<ComboBoxItem Content="Organic Phosphorus"/>
                                                        <ComboBoxItem Content="Mineral Phosphorus"/>-->
                                                    </ComboBox>

                                                    <Button Style="{StaticResource MaterialDesignFloatingActionMiniButton}" ToolTip="Add to observations table"
                                                        Width="35" Height="35" Margin="10, 0, 0, 0" HorizontalAlignment ="Right" Click="add_observation">

                                                        <materialDesign:PackIcon Kind="Add" />

                                                    </Button>
                                                </StackPanel>
                                            </Grid>
                                        </Grid>

                                    </Grid>


                                    <TabControl BorderThickness="0" HorizontalAlignment="Stretch" Grid.Row="1" TabStripPlacement="Bottom" Margin="-8,0,-7,-29">
                                        <TabItem Header="Parameters">
                                            <Grid Background="{DynamicResource MaterialDesignPaper}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="10*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <DataGrid Grid.Column="1" Background="{DynamicResource MaterialDesignPaper}" x:Name="ui_selected_observations" BorderThickness="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                      Margin="0,0,0,0" CanUserAddRows="False"  AutoGenerateColumns="False">
                                                    <DataGrid.Columns>
                                                        <DataGridTextColumn IsReadOnly="True" Header="Object Type" Binding="{Binding object_type}" Width="200"/>
                                                        <DataGridTextColumn IsReadOnly="True" Header="Object Number" Binding="{Binding number}" Width="120" />
                                                        <DataGridTextColumn IsReadOnly="True" Header="Observation File" Binding="{Binding file}" Width="*"/>
                                                        <DataGridTextColumn IsReadOnly="True" Header="Timestep" Binding="{Binding timestep}" Width="120"/>
                                                        <DataGridTextColumn IsReadOnly="True" Header="Observed Variable" Binding="{Binding observed_variable}" Width="180"/>
                                                    </DataGrid.Columns>

                                                </DataGrid>

                                            </Grid>
                                        </TabItem>
                                        <TabItem Header="Map" Visibility="Hidden">
                                            <Grid Background="#FFE5E5E5"/>
                                        </TabItem>

                                    </TabControl>

                                </Grid>


                            </Grid>
                        </Grid>

                    </TabItem>
                    <TabItem Header="Sensitivity">
                        <Grid x:Name="ui_sensitivity_grid" Background="{DynamicResource MaterialDesignPaper}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="100"/>
                                <RowDefinition Height="12*"/>
                                <RowDefinition Height="5*"/>
                            </Grid.RowDefinitions>

                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Orientation="Horizontal" Grid.Column="1">
                                    <ComboBox
                                        Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                        x:Name="ui_sensitivity_analysis_method"
                                        materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                        materialDesign:HintAssist.Hint="Sensitivity Analysis Method"
                                        MinWidth="300" DropDownClosed="update_sensitivty_method" >

                                        <ComboBoxItem>
                                            Sobol
                                        </ComboBoxItem>
                                        <ComboBoxItem>
                                            Fourier Amplitude
                                        </ComboBoxItem>
                                        <ComboBoxItem>
                                            Random Balance Designs Fourier Amplitude
                                        </ComboBoxItem>
                                        <ComboBoxItem>
                                            Delta Moment-Independent Measure
                                        </ComboBoxItem>
                                    </ComboBox>

                                    <ComboBox
                                        Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                        materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                        x:Name="ui_sensitivity_observation_selection"
                                        materialDesign:HintAssist.Hint="Observation" Margin="15, 0, 0, 0"
                                        MinWidth="200">
                                    </ComboBox>

                                    <TextBox materialDesign:HintAssist.Hint="Seed"
                                             Margin="25, 0, 0, 3" MinWidth="70" x:Name="ui_sensitivity_seed_box"
                                             ToolTip="This number determines how many parameter samples are generated"
                                             Text="{Binding seed, Mode=TwoWay}"
                                             Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                             VerticalAlignment="Center" LostFocus="update_sensitivity_seed" TextChanged="update_sensitivity_seed" />

                                    
                                    
                                    
                                    <materialDesign:Chip  Visibility="Visible" Margin="15, 0, 0, -5" MinWidth="200">
                                        <TextBlock HorizontalAlignment="Center" x:Name="ui_sensitivity_number_of_samples" Opacity="0.6" Margin="0, 2, 0, 0" MinWidth="70" VerticalAlignment="Center">
                                        Number of Samples: -
                                        </TextBlock>
                                    </materialDesign:Chip>

                                </StackPanel>

                            </Grid>


                            <Grid Grid.Row="1">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="10*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>

                                <Grid Grid.Column="1">
                                    <DataGrid x:Name="ui_sensitivity_parameters" BorderThickness="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                              Background="{DynamicResource MaterialDesignPaper}" Margin="0,0,0,10" CanUserAddRows="False"
                                              AutoGenerateColumns="False" CellEditEnding="update_parameter_value"
                                              materialDesign:DataGridAssist.CellPadding="2 4 2 4" 
                                              materialDesign:DataGridAssist.ColumnHeaderPadding="2 3 2 3">
                                        <DataGrid.Columns>
                                            <DataGridTextColumn IsReadOnly="True"  Header="Group" Binding="{Binding object_type}" Width="*" MinWidth="50"/>
                                            <DataGridTextColumn IsReadOnly="True"  Header="Change Type" Binding="{Binding change_type}" Width="*" MinWidth="80"/>
                                            <DataGridTextColumn IsReadOnly="True"  Header="Name" Binding="{Binding name}" MinWidth="55" Width="*"/>
                                            <DataGridTextColumn IsReadOnly="True"  Header="" Binding="{Binding units}" Width="*" MaxWidth="120"/>
                                            <DataGridTextColumn IsReadOnly="True"  Header="Sensitivity" Binding="{Binding sensitivity}" Width="*" MinWidth="50"/>

                                        </DataGrid.Columns>
                                    </DataGrid>
                                </Grid>
                            </Grid>


                            <Grid Grid.Row="2">
                                <StackPanel Orientation="Vertical">
                                    <ProgressBar Visibility="Collapsed" x:Name="ui_sensitivity_progress" Value="0" materialDesign:TransitionAssist.DisableTransitions="True" />

                                    <ProgressBar x:Name="ui_sensitivity_is_running" Width="32" Height="32" Style="{StaticResource MaterialDesignCircularProgressBar}" Value="0" IsIndeterminate="True" />

                                    <Button Foreground="{DynamicResource MaterialDesignTextAreaBorder}"
                                        x:Name="ui_sensitivity_run_swat_plus_sensitivity"
                                        HorizontalAlignment="Center" VerticalAlignment="Top" Margin="0,15,0,0"
                                        Style="{StaticResource MaterialDesignFlatButton}"
                                        ToolTip="Run sensitivity analysis" Click="run_sensitivity">
                                        <StackPanel Orientation="Horizontal">
                                            <materialDesign:PackIcon x:Name="ui_sensitivity_run_icon" Kind="Play" />
                                            <TextBlock  x:Name="ui_sensitivity_run_swat_sensitivity_vutton_text" Text=" Analyse"/>
                                        </StackPanel>
                                    </Button>
                                </StackPanel>
                            </Grid>


                        </Grid>
                    </TabItem>
                    <TabItem Header="Calibration" Background="{DynamicResource MaterialDesignPaper}">
                        <Grid x:Name="ui_calibration_grid" Background="{DynamicResource MaterialDesignPaper}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="85"/>
                            </Grid.RowDefinitions>

                            <TabControl x:Name="ui_calibration_tab_pages" Grid.Row="0" TabStripPlacement="Bottom" Margin="-8,-8,-12,-28" Grid.RowSpan="2">
                                <TabItem Header="Manual Calibration" Background="{DynamicResource MaterialDesignPaper}">

                                    <Grid Background="{DynamicResource MaterialDesignPaper}">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="10*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <Grid Grid.Column="1" Background="{DynamicResource MaterialDesignPaper}">
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="100"/>
                                                <RowDefinition Height="7*"/>
                                                <RowDefinition Height="10*"/>
                                                <RowDefinition Height="3*"/>
                                            </Grid.RowDefinitions>

                                            <Grid Grid.Row="2">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="7*"/>
                                                    <ColumnDefinition Width="3*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.Resources>
                                                    <Style TargetType="lvc:LineSeries">
                                                        <Setter Property="StrokeThickness" Value="2"></Setter>
                                                        <!--<Setter Property="Stroke" Value="White"></Setter>-->
                                                        <!--<Setter Property="Fill" Value="#4EFFFFFF"></Setter>-->
                                                        <Setter Property="PointGeometrySize" Value="0"></Setter>
                                                        <Setter Property="LineSmoothness" Value="0"></Setter>
                                                    </Style>
                                                </Grid.Resources>
                                                <lvc:CartesianChart Margin="0, 10, 0, 0" Visibility="Visible" x:Name="ui_calibration_manual_chart" Grid.Column="0" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                                Series="{Binding SeriesCollection}">

                                                    <lvc:CartesianChart.AxisY>
                                                        <lvc:Axis MinValue="0" Name="ui_calibration_manual_chart_x_axis" Title=""></lvc:Axis>
                                                    </lvc:CartesianChart.AxisY>

                                                    <lvc:CartesianChart.AxisX>
                                                        <lvc:Axis Title="Date" Labels="{Binding Labels}"></lvc:Axis>
                                                    </lvc:CartesianChart.AxisX>

                                                </lvc:CartesianChart>

                                                <ListBox x:Name="ui_calibration_manual_available_charts"
                                                     SelectionChanged="show_chart_for_selected_observation" Grid.Column="1"
                                                    
                                                     DisplayMemberPath="chart_name" MouseDown="show_chart_for_selected_observation_m" MouseDoubleClick="show_chart_for_selected_observation_d">
                                                </ListBox>
                                            </Grid>
                                            <ProgressBar Visibility="Collapsed" Grid.Row="1" VerticalAlignment="Top" x:Name="ui_calibration_manual_run_swat_progress" Value="0" materialDesign:TransitionAssist.DisableTransitions="True" />

                                            <StackPanel Grid.Row="0" Orientation="Vertical" HorizontalAlignment="Center" VerticalAlignment="Center">


                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Center" Margin="0, 10, 0, 0" >
                                                    <!--<ProgressBar Visibility="Collapsed" x:Name="ui_calibration_mannual_is_running" Width="32" Height="32" Style="{StaticResource MaterialDesignCircularProgressBar}" Value="0" IsIndeterminate="True" />-->

                                                    <Button Foreground="{DynamicResource MaterialDesignTextAreaBorder}" x:Name="ui_calibration_manual_run_swat_plus"
                                                        Grid.Row = "1" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="12,0,0,0"
                                                        Style="{StaticResource MaterialDesignFlatButton}" ToolTip="Run SWAT+ with current parameters"
                                                        Click="run_swat_plus_model_with_new_pars">
                                                        <StackPanel Orientation="Horizontal">
                                                            <materialDesign:PackIcon x:Name="ui_calibration_manual_run_icon" Kind="Play" />
                                                            <TextBlock  x:Name="ui_calibration_manual_run_swat_button_text" Text=" Run SWAT+"/>
                                                        </StackPanel>
                                                    </Button>
                                                    <Button x:Name="ui_calibration_manual_refresh_indices" Style="{StaticResource MaterialDesignIconButton}"
                                                        Width="40" Height="40" Margin="10, -5, 10, 0" Background="{DynamicResource MaterialDesignTextFieldBoxBackground}" ToolTip="Refresh Model Performance"
                                                        Click="calibration_manual_refresh_indices">
                                                        <materialDesign:PackIcon Kind="Sync" Height="30" Width="30"/>
                                                    </Button>
                                                </StackPanel>
                                            </StackPanel>



                                            <Grid Grid.Row="1" Background="{DynamicResource MaterialDesignPaper}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="11*"/>
                                                    <ColumnDefinition Width="9*"/>
                                                </Grid.ColumnDefinitions>

                                                <Grid Grid.Column="0" Margin="0, 0, 15, 0">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="10*"/>
                                                    </Grid.RowDefinitions>

                                                    <Grid Grid.Row="1" Margin="0, 0, 0, 0" Background="{DynamicResource MaterialDesignPaper}">
                                                        <DataGrid x:Name="ui_calibration_mannual_parameters" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                          Background="{DynamicResource MaterialDesignPaper}"
                                                      Margin="0,0,0,0" CanUserAddRows="False"  AutoGenerateColumns="False" CellEditEnding="update_parameter_value"
                                                     materialDesign:DataGridAssist.CellPadding="2 4 2 4" 
                                                          materialDesign:DataGridAssist.ColumnHeaderPadding="2 3 2 3">
                                                            <DataGrid.Columns>
                                                                <DataGridTextColumn IsReadOnly="True"  Header="Group" Binding="{Binding object_type}" Width="*" MinWidth="50"/>
                                                                <DataGridTextColumn IsReadOnly="True"  Header="Name" Binding="{Binding name}" MinWidth="55" Width="*"/>
                                                                <DataGridTextColumn IsReadOnly="True"  Header="Change Type" Binding="{Binding change_type}" Width="*" MinWidth="80"/>
                                                                <DataGridTextColumn IsReadOnly="True"  Header="Abs.min" Binding="{Binding absolute_minimum}" Width="*" MinWidth="50"/>
                                                                <DataGridTextColumn IsReadOnly="True"  Header="Abs.max" Binding="{Binding absolute_maximum}" Width="*" MinWidth="50"/>
                                                                <DataGridTextColumn IsReadOnly="True"  Header="Curr. Best" Binding="{Binding best_sens_parameter}" Width="*" MinWidth="50"/>
                                                                <DataGridTextColumn IsReadOnly="False" Header="Value" Binding="{Binding value, Mode=TwoWay}" Width="*"/>
                                                                <DataGridTextColumn IsReadOnly="True"  Header="" Binding="{Binding units}" Width="*" MinWidth="20"/>
                                                            </DataGrid.Columns>
                                                        </DataGrid>
                                                    </Grid>
                                                </Grid>

                                                <Grid Grid.Column="1">
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="*"/>
                                                        <RowDefinition Height="10*"/>
                                                    </Grid.RowDefinitions>

                                                    <Grid Grid.Row="1">
                                                        <DataGrid x:Name="ui_calibration_manual_performance" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                      Margin="0,0,0,0" CanUserAddRows="False"  AutoGenerateColumns="False"
                                                          materialDesign:DataGridAssist.CellPadding="2 4 2 4" 
                                                          materialDesign:DataGridAssist.ColumnHeaderPadding="2 3 2 3">
                                                            <DataGrid.Columns>
                                                                <DataGridTextColumn IsReadOnly="True" Header="" Binding="{Binding object_type}" MinWidth="120" Width="2*"/>
                                                                <DataGridTextColumn IsReadOnly="True" Header="" Binding="{Binding number}" Width="*" />
                                                                <DataGridTextColumn IsReadOnly="True" Header="" Binding="{Binding timestep}" Width="*" />
                                                                <DataGridTextColumn IsReadOnly="True" Header="" Binding="{Binding observed_variable}" Width="*" />
                                                                <DataGridTextColumn IsReadOnly="True" Header="NSE" Binding="{Binding nse}" MinWidth="30"/>
                                                                <!--<DataGridTextColumn IsReadOnly="True" Header="R2" Binding="{Binding Path=r2}" MinWidth="20"/>-->
                                                                <DataGridTextColumn IsReadOnly="True" Header="PBias" Binding="{Binding pbias}" MinWidth="30"/>
                                                            </DataGrid.Columns>
                                                        </DataGrid>
                                                    </Grid>



                                                </Grid>

                                            </Grid>
                                        </Grid>

                                    </Grid>





                                </TabItem>

                                <TabItem Header="Automatic Calibration">
                                    <Grid Background="{DynamicResource MaterialDesignPaper}">
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="100"/>
                                            <RowDefinition Height="7*"/>
                                            <RowDefinition Height="10*"/>
                                            <RowDefinition Height="3*"/>
                                        </Grid.RowDefinitions>

                                        <Grid Grid.Row="0">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="8*"/>
                                                <ColumnDefinition Width="2*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Orientation="Horizontal" Grid.Column="1">
                                                <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                                          x:Name="ui_calibration_automatic_method"
                                                         materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                                         materialDesign:HintAssist.Hint="Calibration Method" MinWidth="140"
                                                          IsEnabled="False">

                                                    <ComboBoxItem IsSelected="True">
                                                        Sampled Parameters
                                                    </ComboBoxItem>
                                                </ComboBox>

                                                <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                                          x:Name="ui_calibration_automatic_observation_selection"
                                                          materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                                          materialDesign:HintAssist.Hint="Observation" Margin="15, 0, 0, 0"
                                                          MinWidth="170">
                                                </ComboBox>
                                                <ComboBox Style="{StaticResource MaterialDesignFloatingHintComboBox}"
                                                          materialDesign:TextFieldAssist.UnderlineBrush="{DynamicResource SecondaryAccentBrush}"
                                                          materialDesign:HintAssist.Hint="Objective Function" Margin="15, 0, 0, 0"
                                                          MinWidth="80" IsEnabled="False">

                                                    <ComboBoxItem IsSelected="True">
                                                        NSE
                                                    </ComboBoxItem>

                                                </ComboBox>

                                                <TextBox materialDesign:HintAssist.Hint="Seed" Margin="25, 0, 0, 3" MinWidth="70"
                                                         x:Name="ui_calibration_automatic_seed_box"
                                                         ToolTip="This number determines how many parameter samples are generated" 
                                                         Text="{Binding seed, Mode=TwoWay}" Style="{StaticResource MaterialDesignFloatingHintTextBox}"
                                                         VerticalAlignment="Center" LostFocus="update_sensitivity_seed_auto" />

                                                <materialDesign:Chip Visibility="Hidden" Margin="15, 0, 0, -5" Width="80">
                                                    <TextBlock TextAlignment="Center"> Runs: 2000</TextBlock>
                                                </materialDesign:Chip>


                                            </StackPanel>

                                            <StackPanel Orientation="Horizontal" Grid.Column="2" HorizontalAlignment="Right">
                                                <ProgressBar Margin="10, 0, 0, 0" Visibility="Hidden" x:Name="ui_calibration_automatic_is_running" Width="32" Height="32" Style="{StaticResource MaterialDesignCircularProgressBar}" Value="0" IsIndeterminate="True" />

                                                <Button Foreground="{DynamicResource MaterialDesignTextAreaBorder}"
                                                        x:Name="ui_calibration_automatic_run"
                                                        HorizontalAlignment="Center" VerticalAlignment="Center" Margin="2,0,0,0"
                                                        Style="{StaticResource MaterialDesignFlatButton}"
                                                        ToolTip="Run automatic calibration" Click="run_sample_parameter_calibration">

                                                    <StackPanel Orientation="Horizontal">
                                                        <materialDesign:PackIcon x:Name="ui_calibration_automatic_run_icon" Kind="Play"/>
                                                        <TextBlock Margin="0, 1, 0, 0" x:Name="ui_calibration_automatic_calibration_run_calibration" Text=" Calibrate"/>
                                                    </StackPanel>
                                                </Button>
                                            </StackPanel>

                                        </Grid>

                                        <Grid Grid.Row="1" Background="{DynamicResource MaterialDesignPaper}">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="6*"/>
                                                <ColumnDefinition Width="4*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>

                                            <Grid Grid.Column="1" Margin="0, 0, 15, 0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="10*"/>
                                                </Grid.RowDefinitions>

                                                <Grid Grid.Row="1" Margin="0, 0, 0, 0" Background="{DynamicResource MaterialDesignPaper}">
                                                    <DataGrid HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                              Background="{DynamicResource MaterialDesignPaper}"
                                                              x:Name="ui_calibration_automatic_parameters"
                                                              Margin="0,0,0,0" CanUserAddRows="False"  AutoGenerateColumns="False"
                                                              materialDesign:DataGridAssist.CellPadding="2 4 2 4" 
                                                              materialDesign:DataGridAssist.ColumnHeaderPadding="2 3 2 3">

                                                        <DataGrid.Columns>
                                                            <DataGridTextColumn IsReadOnly="True"  Header="Group" Binding="{Binding object_type}" Width="*" MinWidth="50"/>
                                                            <DataGridTextColumn IsReadOnly="True"  Header="Name" Binding="{Binding name}" MinWidth="55" Width="*"/>
                                                            <DataGridTextColumn IsReadOnly="True"  Header="Change Type" Binding="{Binding change_type}" Width="*" MinWidth="80"/>
                                                            <DataGridTextColumn IsReadOnly="True"  Header="Current Best" Binding="{Binding best_sens_parameter}" Width="*" MinWidth="50"/>
                                                            <DataGridTextColumn IsReadOnly="True"  Header="Value" Binding="{Binding value}" Width="*"/>
                                                            <DataGridTextColumn IsReadOnly="True"  Header="" Binding="{Binding units}" Width="*" MinWidth="20"/>
                                                        </DataGrid.Columns>
                                                    </DataGrid>



                                                    <TextBlock HorizontalAlignment="Right" Margin="2, 5, 2, 0" VerticalAlignment="Top"
                                                               IsEnabled="False" Style="{StaticResource MaterialDesignBody2TextBlock}"
                                                               x:Name="ui_calibration_automatic_best_obj_function_label">
                                                               Best NSE: -
                                                    </TextBlock>
                                                </Grid>
                                            </Grid>

                                            <Grid Grid.Column="2">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="10*"/>
                                                </Grid.RowDefinitions>

                                                <DataGrid Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                          x:Name="ui_calibration_automatic_performance" 
                                                          Margin="0,0,0,0" CanUserAddRows="False"  AutoGenerateColumns="False"
                                                          materialDesign:DataGridAssist.CellPadding="2 4 2 4" 
                                                          materialDesign:DataGridAssist.ColumnHeaderPadding="2 3 2 3">
                                                    <DataGrid.Columns>
                                                        <DataGridTextColumn IsReadOnly="True" Header="" Binding="{Binding object_type}" MinWidth="120" Width="2*"/>
                                                        <DataGridTextColumn IsReadOnly="True" Header="" Binding="{Binding number}" Width="*" />
                                                        <DataGridTextColumn IsReadOnly="True" Header="" Binding="{Binding timestep}" Width="*" />
                                                        <DataGridTextColumn IsReadOnly="True" Header="" Binding="{Binding observed_variable}" Width="*" />
                                                        <DataGridTextColumn IsReadOnly="True" Header="NSE" Binding="{Binding nse}" MinWidth="30"/>
                                                        <!--<DataGridTextColumn IsReadOnly="True" Header="R2" Binding="{Binding Path=r2}" MinWidth="20"/>-->
                                                        <DataGridTextColumn IsReadOnly="True" Header="PBias" Binding="{Binding pbias}" MinWidth="30"/>
                                                    </DataGrid.Columns>
                                                </DataGrid>

                                            </Grid>

                                        </Grid>

                                        <StackPanel Grid.Row="2">
                                            <Grid Background="{DynamicResource MaterialDesignPaper}">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="10*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <ProgressBar Visibility="Collapsed" Grid.Column="1" x:Name="ui_calibration_automatic_progress" Value="0" materialDesign:TransitionAssist.DisableTransitions="True" />
                                            </Grid>

                                        </StackPanel>
                                        <Grid Grid.Row="2">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="7*"/>
                                                <ColumnDefinition Width="3*"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <Grid.Resources>
                                                <Style TargetType="lvc:LineSeries">
                                                    <Setter Property="StrokeThickness" Value="2"></Setter>
                                                    <!--<Setter Property="Stroke" Value="White"></Setter>-->
                                                    <!--<Setter Property="Fill" Value="#4EFFFFFF"></Setter>-->
                                                    <Setter Property="PointGeometrySize" Value="0"></Setter>
                                                    <Setter Property="LineSmoothness" Value="0"></Setter>
                                                </Style>
                                            </Grid.Resources>

                                            <lvc:CartesianChart Margin="0, 10, 0, 0" Visibility="Visible" x:Name="ui_calibration_automatic_chart" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                                                                Series="{Binding SeriesCollection_auto}">

                                                <lvc:CartesianChart.AxisY>
                                                    <lvc:Axis MinValue="0" Name="ui_calibration_automatic_chart_x_axis" Title=""></lvc:Axis>
                                                </lvc:CartesianChart.AxisY>

                                                <lvc:CartesianChart.AxisX>
                                                    <lvc:Axis Title="Date" Labels="{Binding Labels_auto}"></lvc:Axis>
                                                </lvc:CartesianChart.AxisX>

                                            </lvc:CartesianChart>

                                            <Grid Grid.Column="2" >
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="*"/>
                                                    <RowDefinition Height="2*"/>
                                                </Grid.RowDefinitions>

                                                <Grid.Resources>
                                                    <Style TargetType="lvc:LineSeries">
                                                        <Setter Property="StrokeThickness" Value="2"></Setter>
                                                        <!--<Setter Property="Stroke" Value="White"></Setter>-->
                                                        <!--<Setter Property="Fill" Value="#4EFFFFFF"></Setter>-->
                                                        <Setter Property="PointGeometrySize" Value="0"></Setter>
                                                        <Setter Property="LineSmoothness" Value="0"></Setter>
                                                    </Style>
                                                    <Style TargetType="lvc:Axis">
                                                        <Setter Property="ShowLabels" Value="False"></Setter>
                                                        <Setter Property="IsEnabled" Value="False"></Setter>
                                                    </Style>
                                                </Grid.Resources>

                                                <ListBox Grid.Row="0" x:Name="ui_calibration_automatic_available_charts" SelectionChanged="show_chart_for_selected_observation_auto" Grid.Column="2"
                                                         DisplayMemberPath="chart_name" MouseDown="show_chart_for_selected_observation_m_auto" MouseDoubleClick="show_chart_for_selected_observation_d_auto">
                                                </ListBox>
                                                <lvc:CartesianChart Visibility="Hidden" Grid.Row="1" Margin="0, 0, 0, 0" Series="{Binding last_performance_range}" Hoverable="False" DataTooltip="{x:Null}">
                                                    <lvc:CartesianChart.AxisX>
                                                        <!--a small visual improvement, lets hide the first points (x = 0, x=1) to get better animations-->
                                                        <lvc:Axis ></lvc:Axis>
                                                    </lvc:CartesianChart.AxisX>
                                                </lvc:CartesianChart>
                                            </Grid>
                                        </Grid>


                                    </Grid>
                                </TabItem>
                            </TabControl>


                            <Grid Grid.Row="1" HorizontalAlignment="Stretch" VerticalAlignment="Top">
                                <materialDesign:Card
                                    materialDesign:ShadowAssist.ShadowDepth="Depth0"
                                    Padding="1" MinWidth="280" Margin="0, 0, 0, 17"
                                    HorizontalAlignment="Center">

                                    <StackPanel Orientation="Horizontal" Margin="4" HorizontalAlignment="Center">

                                        <RadioButton IsChecked="True" Click="navigate_calibration_manual" IsEnabled="True" MinWidth="110" Content="Manual" ToolTip="Perform a Manual Calibration" Style="{StaticResource MaterialDesignTabRadioButton}" Margin="0" Cursor="Hand"/>
                                        <RadioButton IsChecked="False" MinWidth="110" Content="Automatic" ToolTip="Perform an Automatic Calibration" Style="{StaticResource MaterialDesignTabRadioButton}" Margin="0" Click="navigate_calibration_automatic" Cursor="Hand"  />

                                    </StackPanel>

                                </materialDesign:Card>
                            </Grid>
                        </Grid>
                    </TabItem>


                    <TabItem Header="Model Check">
                        <Grid x:Name="ui_model_check_grid" Background="{DynamicResource MaterialDesignPaper}">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="70"/>
                            </Grid.RowDefinitions>


                            <TabControl x:Name="ui_model_check_pages" Grid.Row="0" Margin="-8,-8,-7,-27" TabStripPlacement="Bottom" Grid.RowSpan="2">
                                <TabItem Header="TabItem">

                                </TabItem>
                                <TabItem Header="TabItem">
                                    <Grid Background="{DynamicResource MaterialDesignPaper}">
                                        <Image x:Name="ui_model_check_hydrology_image" Stretch="UniformToFill" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                        <Button Width="32" Height="32" x:Name="ui_model_check_clear_wb" Click="disengage_wb_source"
                                                HorizontalAlignment="Right" Style="{StaticResource MaterialDesignIconButton}"
                                                ToolTip="Clear Water Balance Diagram" Background="{DynamicResource MaterialDesignTextFieldBoxBackground}"
                                                VerticalAlignment="Top" Margin="0, 10, 25, 0">
                                            <materialDesign:PackIcon Kind="Minus" Width="30" Height="30"/>
                                        </Button>

                                    </Grid>
                                </TabItem>
                                <TabItem Header="TabItem">
                                    <Grid Background="{DynamicResource MaterialDesignPaper}">
                                        <Image x:Name="ui_model_check_nutrients_image" Stretch="UniformToFill" HorizontalAlignment="Center" VerticalAlignment="Center"/>

                                        <!--x:Name="ui_model_check_clear_nb"  Click="disengage_nb_source" -->
                                        <Button Width="32" Height="32" 
                                                HorizontalAlignment="Right" Style="{StaticResource MaterialDesignIconButton}"
                                                ToolTip="Clear Nutrients Diagram" Background="{DynamicResource MaterialDesignTextFieldBoxBackground}"
                                                VerticalAlignment="Top" Margin="0, 10, 25, 0">
                                            <materialDesign:PackIcon Kind="Minus" Width="30" Height="30"/>
                                        </Button>

                                    </Grid>
                                </TabItem>

                            </TabControl>

                            <Grid Grid.Row="1" HorizontalAlignment="Stretch">
                                <materialDesign:Card
                                    materialDesign:ShadowAssist.ShadowDepth="Depth1"
                                    Padding="1" MinWidth="450" Margin="0, 0, 0, 17"
                                    HorizontalAlignment="Center" Opacity="0.6">

                                    <StackPanel Orientation="Horizontal" Margin="4" HorizontalAlignment="Center">

                                        <Button Style="{StaticResource MaterialDesignIconButton}" Width="40" Height="40" Margin="10, 0, 10, 0"
                                                Background="{DynamicResource MaterialDesignTextFieldBoxBackground}" ToolTip="Refresh Analysis" Click="analyse_model" >
                                            <materialDesign:PackIcon Kind="Sync" Height="30" Width="30"/>
                                        </Button>

                                        <RadioButton Click = "navigate_ui_model_check_overview" IsChecked="False" IsEnabled="False" MinWidth="110" Content="Overview" ToolTip="Model Analysis of various components" Style="{StaticResource MaterialDesignTabRadioButton}" Margin="0" Cursor="Hand"/>
                                        <RadioButton Click = "navigate_ui_model_check_mass_balance" IsChecked="True"  IsEnabled="True" MinWidth="110" Content="Hydrology" ToolTip="Hydrological Mass Balance" Style="{StaticResource MaterialDesignTabRadioButton}" Margin="0" Cursor="Hand"/>
                                        <RadioButton Click = "navigate_ui_model_check_nutrients" IsChecked="False" IsEnabled="True" MinWidth="110" Content="Nutrients" ToolTip="Nutrient Balance" Style="{StaticResource MaterialDesignTabRadioButton}" Margin="0" Cursor="Hand" />
                                        <RadioButton Click = "navigate_ui_model_check_plants" IsChecked="False" IsEnabled="False" MinWidth="110" Content="Plants" ToolTip="Vegetation Information" Style="{StaticResource MaterialDesignTabRadioButton}" Margin="0" Cursor="Hand"/>
                                    </StackPanel>

                                </materialDesign:Card>
                            </Grid>
                        </Grid>
                    </TabItem>
                </TabControl>
            </Grid>
            <materialDesign:TransitionerSlide>
                <materialDesign:TransitionerSlide.BackwardWipe>
                    <materialDesign:CircleWipe/>
                </materialDesign:TransitionerSlide.BackwardWipe>
                <materialDesign:TransitionerSlide.ForwardWipe>
                    <materialDesign:SlideWipe Direction="Right"/>
                </materialDesign:TransitionerSlide.ForwardWipe>
            </materialDesign:TransitionerSlide>
        </materialDesign:Transitioner>

        <StackPanel Grid.Row="2">
            <ProgressBar x:Name="ui_master_progress_bar" Value="0" Height="10" />
        </StackPanel>


    </Grid>

</Window>
